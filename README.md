# Unnatural language generation / Генератор неприродної мови

![GitHub release (latest by date including pre-releases)](https://img.shields.io/github/v/release/andrewyazura/unnatural-language-generation?include_prereleases&label=release&labelColor=181717&logo=github)
![GitHub Workflow Status](https://img.shields.io/github/workflow/status/andrewyazura/unnatural-language-generation/Lint?label=linter&labelColor=181717&logo=github)
[![Telegram Bot Link](https://img.shields.io/static/v1?label=telegram&message=bot&color=26a5e4&labelColor=181717&logo=telegram)](https://t.me/unnatural_language_bot)

## Що це?

Це - примітивний генератор неприродної мови.
Він приймає на вхід текст та запам'ятовує зв'язки між словами, а після цього генерує речення заданої довжини на основі вхідної інформації.

## Як спробувати?

Telegram бот [@unnatural_language_bot](https://t.me/unnatural_language_bot)

## Як це працює?

Для того, щоб генерувати текст, програма має прочитати декілька вже готових.
Отриманий від користувача текст проходить декілька етапів:

1. Токенізація
2. Перетворення у граф

### Токенізація

Токенізація - процес розділення тексту на окремі частинки - слова та пунктуацію.
Пунктуація розглядається окремою частиною тексту, на тому ж рівні, що і слова.

Для токенізації використовується бібліотека [`tokenize_uk`](https://github.com/lang-uk/tokenize-uk).

### Перетворення у граф

Програма опрацьовує кожне речення окремо.
Вона по черзі бере слова з нього та записує зв'язки між ними в граф.
Вага зв'язку між двома словами у графі - це кількість випадків, коли слова зустрічалися разом у текстах.

### Приклад опрацювання тексту

Вхідний текст:

`Lorem ipsum dolor sit amet, consectetur adipiscing elit.`

Розділений на токени:

`[['lorem', 'ipsum', 'dolor', 'sit', 'amet', ',', 'consectetur', 'adipiscing', 'elit', '.']]`

Представлений у вигляді графа:

![image](https://user-images.githubusercontent.com/39884112/124186706-600fe900-dac5-11eb-9e29-f3b75bb1dfee.png)

Кожен зв'язок має вагу 1, бо зустрічався всього один раз за весь текст. Якщо взяти цілий абзац _Lorem ipsum_, отримаємо такий граф:

![image](https://user-images.githubusercontent.com/39884112/124186905-a6fdde80-dac5-11eb-97db-fdaa149cd7a4.png)

Слів стало набагато більше, а деякі зв'язки мають вагу 2.

## Генерація тексту

Коли програма вже має граф, вона може генерувати нові тексти.
Їй потрібне перше слово речення, він якого вона може відштовхнутися.
Це має бути слово, що вже є в графі, бо інакше програма не зможе підібрати наступне.
Кожне наступне слово випадково обирається з тих, що були пов'язані з поточним у графі, з урахуванням ваги зв'язків.
У графі можуть бути цикли, тож є імовірність, що програма буде вічно блукати в одному з них.

### Приклади

Завантажити тексти, використані для прикладів, можна тут: [GitHub Gist](https://gist.github.com/andrewyazura/98b612f4fe9c3075177d992495ccee12).

#### Кобзар

Після опрацювання повного тексту збірки **"Кобзар"**, програма згенерувала такий текст:

> сказилися кричать за землю він на всіх імператорів би нам , по долині - за темнії , і не наробить . мов за панною пішло . наплювали на базарі , хмара криє . під тином , скорбная , сину , козаки

#### Енеїда

**"Енеїда"** дала такі результати:

> вже дожидає і ветхого царя , вирвавшись надвір під дудку била задом , а для його щоб в другім отряді пішли к тому ж ! ти і думку пошибала к чортам ви швидче тарани . поодаль плив плив . нептун замудровав

та

> пожар залив водою чортзна де ждуть мене удруге не під буркой витягавсь . – паничу ! сількісь ! уже не захлебнувсь . – і небилиця , затрусивсь . – судьба вертить ! проклятії поганці , – не вдовольнившись , схвативши головешку

## Telegram bot

Для зручного користування програмою існує telegram бот - [@unnatural_language_bot](https://t.me/unnatural_language_bot).
Кожен користувач має окремий граф і може наповнювати його, надсилаючи текст у вигляді повідомлення або `.txt` файлу.

Щоб запустити бота у себе потрібно зареєструвати свого бота через [@botfather](https://t.me/botfather), ввести власні дані у `telegram_bot/bot_config.yml` та запустити `main_bot.py`.

### Команди

| Команда              | Значення                          |
| -------------------- | --------------------------------- |
| `/generate <length>` | згенерувати текст заданої довжини |
| `/stats`             | показати статистику про граф      |
| `/clear`             | очистити свій граф                |

#### /stats

Команда `/stats` показує такі параметри:

1. Кількість слів (кількість нод у графі)
2. Кількість зв'язків між словами (кількість ребер графу)
3. Вага графу (сумма ваг усіх ребер графу)

### Адмінські команди

| Команда            | Значення                                |
| ------------------ | --------------------------------------- |
| `/stats_all`       | показати статистику кожного графа       |
| `/clear_user <id>` | очистити граф користувача з вказаним id |
| `/clear_all`       | очистити всі графи                      |

## Що не працює

Програма не розуміє контексту і не здатна відмінювати слова у реченні.

## Credits

Дякую за ідею [@danbst](https://github.com/danbst)
